<!-- This page displays the user's profile with information like contact details and availabilities -->

<div class="container">
<div class="row">
  <div class="col">
    <div class="center">
      <% if @user.image.present? %>
      <%= image_tag(@user.image_url) %>
      <% else %>
      <%= image_tag('defaultprofile.svg') %>
      <% end %>

    <div class="panel panel-default">
      <div class="panel-heading"><%= @user.username %></div>
      <div class="panel-body">
      </div>
    </div>
    </div>
  </div>

    <div class="col-md-6">
    <h1><%= @user.firstname %> <%= @user.lastname %>
    <!-- If the user has uploaded their ID document (under edit profile), then this verification tick will show -->
        <% if @user.identification.present? %>
        <%= image_tag('verified.png', class: 'avatar-small') %>
        <% end %>
    </h1>
    <br>Hourly Rate: $<%= @user.hourly_rate %> per hour<br/>
    <br>Gender: <%= @user.gender %><br/>
    <br>Primary language: <%= @user.language %><br/>
    <br>Location: <%= @user.location %><br/>
    <br>Bio: <%= @user.bio %><br/>
  </div>

<!-- Appointment Form -->
  <div class="col">
  <%#= render 'appointments/form' %>
  </div>
  </div>
  <br/>

  <!-- Google maps -->
  <div class="row center">
      <div id="map" style="width: 80%; height: 350px"></div>

  <!-- Use Javascript to feed the user's latitude and longitude based on their location (contained in the user database) to the Google maps API -->
  <!-- Google API key for Google maps -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAuVjzVqR8jIp0ZitCCNV-4QM7-F_EwyOI">
  </script>
      <script>
          function initialize() {
            var location = {lat: <%= @user.latitude %>, lng: <%= @user.longitude %>};
            var map = new google.maps.Map(document.getElementById('map'), {
              center: location,
              zoom: 14
            });

            var marker = new google.maps.Marker({
              position: location,
              map: map
            });

            infoWindow.open(map, marker);
          }

          google.maps.event.addDomListener(window, 'load', initialize);
      </script>
<br/>
  </div>
  <br/>
</div>
